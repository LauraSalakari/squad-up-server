(this["webpackJsonpsquad-up-client"]=this["webpackJsonpsquad-up-client"]||[]).push([[0],{113:function(e,t,a){},168:function(e,t){},172:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(19),i=a.n(s),o=a(12),l=a(96),d=a(97),u=a(107),j=a(105),b=(a(113),a(13)),h="https://squad-u-p.herokuapp.com/api",O=a(8),p=a.n(O);function m(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Welcome to SquadUp!"}),Object(n.jsx)("p",{children:"hello!"})]})}var x=a(183),f=a(184),g=a(181),v=a(180),w=a(9);function C(e){return Object(n.jsx)("div",{children:Object(n.jsxs)(x.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(w.b,{to:"/",children:Object(n.jsx)(x.a.Brand,{children:"SquadUp!"})}),Object(n.jsx)(x.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(x.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsxs)(f.a,{className:"mr-auto",children:[Object(n.jsx)(w.b,{to:"/squads",children:"Squads"}),Object(n.jsx)(w.b,{to:"/forums",children:"Forums"})]}),Object(n.jsx)(f.a,{children:Object(n.jsxs)(g.a,{title:"Profile",id:"collasible-nav-dropdown dropdown-button-drop-left",as:v.a,drop:"left",children:[Object(n.jsxs)(g.a.Item,{children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.user._id),children:" My Profile"})," "]}),Object(n.jsx)(g.a.Item,{children:Object(n.jsx)(w.b,{to:"/chat",children:" Messages"})}),Object(n.jsx)(g.a.Item,{children:Object(n.jsx)(w.b,{to:"/settings",children:"Settings"})}),Object(n.jsx)(g.a.Divider,{}),Object(n.jsx)(g.a.Item,{onClick:e.onLogout,children:"Log Out"})]})})]})]})})}function S(){return Object(n.jsx)("div",{children:Object(n.jsxs)(x.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(w.b,{to:"/",children:Object(n.jsx)(x.a.Brand,{children:"SquadUp!"})}),Object(n.jsx)(x.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(x.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsx)(f.a,{className:"mr-auto"}),Object(n.jsxs)(f.a,{children:[Object(n.jsx)(w.b,{to:"/signup",children:"Sign Up"}),Object(n.jsx)(w.b,{to:"/signin",children:"Sign In"})]})]})]})})}var y=a(182),_=a(101);function L(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)(y.a,{onSubmit:e.onSignUp,children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Username"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Enter username",name:"username"})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email Address"}),Object(n.jsx)(y.a.Control,{type:"email",placeholder:"Enter email",name:"email"}),Object(n.jsx)(y.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Confirm Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Confirm password",name:"confirmPassword"})]}),Object(n.jsx)(_.a,{variant:"primary",type:"submit",children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})}function q(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)(y.a,{onSubmit:e.onSignIn,children:[Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email Address"}),Object(n.jsx)(y.a.Control,{type:"email",placeholder:"Enter email",name:"email"})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsx)(_.a,{variant:"primary",type:"submit",children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})}var E=a(10),P=a(34),G=a(102),k=a.n(G),I=a(66);function M(e){var t=Object(c.useState)([]),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(e.user),l=Object(E.a)(i,2),d=(l[0],l[1],Object(c.useState)([])),u=Object(E.a)(d,2),j=(u[0],u[1],Object(c.useState)([])),b=Object(E.a)(j,2),O=b[0],m=b[1],x=Object(c.useState)([]),f=Object(E.a)(x,2),g=(f[0],f[1],{option:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},control:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})}});Object(c.useEffect)((function(){k.a.init(),p.a.get("".concat(h,"/platforms"),{withCredentials:!0}).then((function(e){var t=e.data.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));s(t)})).catch((function(e){console.log(e,"failed to fetch platforms")}))}),[]);var v=I.debounce((function(e){p.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));m(t)}))}),500);return e.user?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Edit your profile"}),Object(n.jsx)("h5",{children:"Account Details"}),Object(n.jsxs)(y.a,{onSubmit:e.onEditProfile,encType:"multipart/form-data",children:[Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Username"}),e.user?Object(n.jsx)(y.a.Control,{plaintext:!0,readOnly:!0,defaultValue:e.user.username,style:{color:"#e7e0ec"}}):null]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email address"}),e.user?Object(n.jsx)(y.a.Control,{plaintext:!0,readOnly:!0,defaultValue:e.user.email,style:{color:"#e7e0ec"}}):null]}),Object(n.jsx)("h5",{children:"Profile"}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Profile picture"}),Object(n.jsxs)("div",{children:["Your current profile picture: ",Object(n.jsx)("br",{}),e.user.image?Object(n.jsx)("img",{src:e.user.image,alt:"profile preview",style:{width:100,borderRadius:"50%"}}):"No profile picture set"]}),Object(n.jsx)("p",{children:"Upload a new picture:"}),Object(n.jsx)(y.a.File,{id:"custom-file",label:"Choose a file",class:"custom-file-input",custom:!0,name:"image",accept:"image/png, image/jpeg"})]}),Object(n.jsxs)(y.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(n.jsx)(y.a.Label,{children:"About Me"}),Object(n.jsx)(y.a.Control,{as:"textarea",rows:5,name:"bio",defaultValue:e.user.bio})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Choose your platforms"}),Object(n.jsx)(P.a,{closeMenuOnSelect:!1,isMulti:!0,options:r,styles:g,name:"platforms",defaultValue:e.user.platforms?e.user.platforms.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Select your favourite games"}),Object(n.jsx)(P.a,{onInputChange:v,closeMenuOnSelect:!1,isMulti:!0,options:O,styles:g,name:"games",defaultValue:e.user.games?e.user.games.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]}),Object(n.jsx)(_.a,{variant:"primary",type:"submit",children:"Submit"})]})]}):null}a(48).config();var N=a(185);function D(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Settings"}),Object(n.jsxs)(N.a,{variant:"flush",children:[Object(n.jsx)(N.a.Item,{children:Object(n.jsx)(w.b,{to:"/profile/edit",children:"Edit profile"})}),Object(n.jsx)(N.a.Item,{children:Object(n.jsx)(w.b,{to:"/profile/security",children:"Change password"})})]})]})}function U(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Security settings"}),Object(n.jsx)("h5",{children:"Account details:"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Username: "})," ",e.user.username,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Account email: "})," ",e.user.email]}),Object(n.jsx)("h5",{children:"Change password"}),Object(n.jsxs)(y.a,{onSubmit:e.onChangePassword,children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Old password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Enter your password",name:"password"})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"New password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Enter new password",name:"newPassword"})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Confirm new password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Confirm new password",name:"confirmPassword"})]}),Object(n.jsx)(_.a,{type:"submit",children:"Edit"})]})]})}var z=a(106);function A(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(null),o=Object(E.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){p.a.get("".concat(h,"/profile/").concat(e.match.params.id),{withCredentials:!0}).then((function(t){s(t.data),p.a.get("".concat(h,"/profile/").concat(e.match.params.id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)}))})).catch((function(e){console.log(e)}))}),[]),r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.username}),r.image?Object(n.jsx)("img",{src:r.image,style:{width:200,borderRadius:"50%"},alt:"Profile"}):Object(n.jsx)("img",{src:"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",style:{width:200,borderRadius:"50%"},alt:"Default profile"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Bio:"})," ",Object(n.jsx)("br",{}),r.bio]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Platforms:"})," ",Object(n.jsx)("br",{}),r.platforms?r.platforms.map((function(e){var t=JSON.parse(e);return Object(n.jsx)("div",{children:t.name},t.id)})):Object(n.jsx)("p",{children:"No platforms specified"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Favourite Games:"}),r.games?r.games.map((function(e){var t=JSON.parse(e);return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:t.background_image,alt:"Game",style:{height:100}}),t.name]},t.id)})):Object(n.jsx)("p",{children:"No games specified"})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h4",{children:[r.username,"'s Squads"]}),l?l.map((function(e){return e.creator._id===r._id?Object(n.jsxs)("div",{children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsx)("b",{children:Object(n.jsx)(w.b,{to:"profile/".concat(e.creator._id),children:e.creator.username})})," ",Object(n.jsx)(z.a,{style:{color:"9800ff"}})," "]})]},e._id):Object(n.jsxs)("div",{children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsxs)("b",{children:[Object(n.jsx)(w.b,{to:"profile/".concat(e.creator._id),children:e.creator.username})," "]})]})]},e._id)})):null]})]}):null}var V=a(27),B=a.n(V);function J(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)([]),i=Object(E.a)(s,2),o=i[0],l=i[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/squads"),{withCredentials:!0}).then((function(e){r(e.data),l(e.data)}))}),[]);return Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/squads/create",children:Object(n.jsx)(_.a,{variant:"primary",size:"lg",block:!0,children:"Create a Squad!"})}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Search squads",name:"squadSearch",onChange:function(e){var t=e.target.value,n=a.filter((function(e){return e.game.toLowerCase().includes(t.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase())}));l(n)}}),Object(n.jsx)("div",{children:a?o.map((function(e){return Object(n.jsx)(w.b,{to:"/squads/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:[Object(n.jsx)("h5",{children:e.title}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Game: "}),e.game]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Creator: "}),Object(n.jsx)(w.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})]}),B()(e.createdAt).format("LLL")]})},e._id)})):null})]})}a(174);var F=a(66);function T(e){var t=Object(c.useState)([]),a=Object(E.a)(t,2),r=a[0],s=a[1],i={option:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},control:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})}},l=F.debounce((function(e){p.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));s(t)}))}),500,{leading:!0});return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Create a new squad"}),Object(n.jsxs)(y.a,{onSubmit:e.onCreateSquad,children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Title"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Squad title",name:"title"})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Description"}),Object(n.jsx)(y.a.Control,{as:"textarea",rows:5,name:"description"})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Max squad size"}),Object(n.jsx)(y.a.Control,{type:"number",name:"maxSize",defaultValue:2})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Select the game"}),Object(n.jsx)(P.a,{onInputChange:l,options:r,styles:i,name:"game"})]}),Object(n.jsx)(_.a,{variant:"primary",type:"submit",children:"Create!"})]})]})}function R(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),o=Object(E.a)(i,2),l=o[0],d=o[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){var t=e.data.members.map((function(e){return e._id}));d(t),s(e.data)})).catch((function(e){console.log(e)}))}),[]);return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.title}),Object(n.jsxs)("p",{children:["Game: ",Object(n.jsx)("b",{children:r.game})]}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsx)(w.b,{to:"/profile/".concat(r.creator._id),children:r.creator.username})]}),Object(n.jsxs)("p",{children:["Created at: ",B()(r.createdAt).format("LLL")]}),Object(n.jsxs)("p",{style:{border:"1px #e7e0ec solid",padding:15,margin:10,borderRadius:6},children:[Object(n.jsx)("b",{children:"Description:"})," ",Object(n.jsx)("br",{}),r.description]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h5",{children:"Squad members:"}),Object(n.jsx)("dl",{children:r.members.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(w.b,{to:"/profile/".concat(e._id),children:e.username})},e._id)}))})]}),e.user._id==r.creator._id?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/chat/".concat(r._id),children:Object(n.jsx)(_.a,{children:"Go to chat"})}),Object(n.jsx)(_.a,{variant:"danger",onClick:function(){p.a.delete("".concat(h,"/squads/").concat(e.match.params.id,"/delete"),{withCredentials:!0}).then((function(t){e.history.push("/squads")}))},children:"Delete Squad"}),Object(n.jsx)(w.b,{to:"/squads/".concat(r._id,"/edit"),children:Object(n.jsx)(_.a,{variant:"secondary",children:"Edit Squad"})})]}):l.includes(e.user._id)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(w.b,{to:"/chat/".concat(r._id),children:Object(n.jsx)(_.a,{children:"Go to chat"})}),Object(n.jsx)(_.a,{variant:"danger",onClick:function(t){p.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/leave"),{userId:e.user._id},{withCredentials:!0}).then((function(e){console.log(e.data);var t=e.data.members.map((function(e){return e._id}));d(t),s(e.data)}))},children:"Leave Squad"})]}):l.length<r.maxSize?Object(n.jsx)(_.a,{variant:"primary",onClick:function(){console.log("clicked",e.user.username),p.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/join"),{userId:e.user._id},{withCredentials:!0}).then((function(e){var t=e.data.members.map((function(e){return e._id}));d(t),s(e.data)})).catch((function(e){console.log(e)}))},children:"Join Squad"}):null]}):null}a(48).config();var Y=a(66);function W(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),l=Object(E.a)(i,2),d=l[0],u=l[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){u([{label:e.data.game,value:e.data.game}]),s(e.data)}))}),[]);var j={option:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},control:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(o.a)(Object(o.a)({},e),{},{color:"black"})}},b=Y.debounce((function(e){p.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));u(t)}))}),500,{leading:!0});return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Edit Your Squad"}),Object(n.jsxs)(y.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,s=a.maxSize,i=a.game.value.name,o={title:n.value,description:c.value,maxSize:s.value,game:i};p.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/edit"),o,{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/squads/".concat(r._id))}))},children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Title"}),Object(n.jsx)(y.a.Control,{type:"text",defaultValue:r.title,name:"title"})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Description"}),Object(n.jsx)(y.a.Control,{as:"textarea",rows:5,name:"description",defaultValue:r.description})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Max squad size"}),Object(n.jsx)(y.a.Control,{type:"number",name:"maxSize",defaultValue:r.maxSize})]}),Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(y.a.Label,{children:"Select the game"}),Object(n.jsx)(P.a,{onInputChange:b,closeMenuOnSelect:!1,defaultValue:d[0],options:d,styles:j,name:"game"})]}),Object(n.jsx)(_.a,{variant:"primary",type:"submit",children:"Edit!"})]})]}):Object(n.jsx)("h3",{children:"Edit Your Squad"})}function H(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(null),o=Object(E.a)(i,2),l=o[0],d=o[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/forums"),{withCredentials:!0}).then((function(e){s(e.data),d(e.data)})).catch((function(e){console.log(e)}))}),[]);return l?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/forums/new",children:Object(n.jsx)(_.a,{variant:"primary",size:"lg",block:!0,children:"Create a Post"})}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Search posts",name:"threadSearch",onChange:function(e){var t=e.target.value,a=r.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.content.toLowerCase().includes(t.toLowerCase())}));d(a)}}),Object(n.jsx)("div",{children:r?l.map((function(e){return Object(n.jsx)(w.b,{to:"/forums/".concat(e._id),children:Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10,textDecoration:"none",color:"#e7e0ec"},children:[Object(n.jsx)("h4",{children:e.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(w.b,{to:"/profile/".concat(e.author._id),children:e.author.username})," "]}),B()(e.createdAt).format("LLL")]})})})):null})]}):null}function K(e){return Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.content;p.a.post("".concat(h,"/forums/new"),{title:n.value,content:c.value,author:e.user._id},{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/forums")}))},children:[Object(n.jsx)(y.a.Group,{children:Object(n.jsx)(y.a.Control,{size:"lg",type:"text",placeholder:"Post title",name:"title"})}),Object(n.jsx)(y.a.Group,{children:Object(n.jsx)(y.a.Control,{as:"textarea",rows:8,name:"content"})}),Object(n.jsx)(_.a,{type:"submit",children:"Post"})]})})}a(48).config();var Q=a(46);function X(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(null),o=Object(E.a)(i,2),l=o[0],d=o[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/forums/").concat(e.match.params.id),{withCredentials:!0}).then((function(t){s(t.data),p.a.get("".concat(h,"/forums/").concat(e.match.params.id,"/comments"),{withCredentials:!0}).then((function(e){d(e.data)})).catch((function(e){console.log("this is error:",e)}))})).catch((function(e){console.log(e)}))}),[]);return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(w.b,{to:"/profile/".concat(r.author._id),children:r.author.username})," "]}),Object(n.jsx)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:r.content}),B()(r.createdAt).format("LLL")," ",Object(n.jsx)("br",{}),e.user._id===r.author._id?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/forums/".concat(e.match.params.id,"/edit"),children:Object(n.jsx)(_.a,{children:"Edit"})}),Object(n.jsx)(_.a,{onClick:function(){p.a.delete("".concat(h,"/forums/").concat(e.match.params.id,"/delete"),{withCredentials:!0}).then((function(){e.history.push("/forums")}))},variant:"danger",children:"Delete"})]}):null,Object(n.jsxs)(y.a,{onSubmit:function(t){t.preventDefault();var a=t.target.content;p.a.post("".concat(h,"/forums/").concat(e.match.params.id,"/comment"),{author:e.user._id,content:a.value},{withCredentials:!0}).then((function(a){console.log(a.data),a.data.author=e.user,d([].concat(Object(Q.a)(l),[a.data])),t.target.content.value=""}))},children:[Object(n.jsx)(y.a.Control,{as:"textarea",rows:3,name:"content"}),Object(n.jsx)(_.a,{type:"submit",variant:"secondary",children:"Comment"})]}),l?Object(n.jsx)("div",{children:l.map((function(e){return Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.author._id),children:Object(n.jsx)("b",{children:e.author.username})}),Object(n.jsx)("p",{children:e.content}),B()(e.createdAt).format("LLL")]},e._id)}))}):null]}):null}function Z(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1];Object(c.useEffect)((function(){p.a.get("".concat(h,"/forums/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[]);return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Edit your post"}),Object(n.jsxs)(y.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.content;p.a.patch("".concat(h,"/forums/").concat(e.match.params.id,"/edit"),{title:n.value,content:c.value},{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/forums/".concat(e.match.params.id))}))},children:[Object(n.jsx)(y.a.Group,{children:Object(n.jsx)(y.a.Control,{size:"lg",type:"text",placeholder:"Post title",name:"title",defaultValue:r.title})}),Object(n.jsx)(y.a.Group,{children:Object(n.jsx)(y.a.Control,{as:"textarea",rows:8,name:"content",defaultValue:r.content})}),Object(n.jsx)(_.a,{type:"submit",children:"Post"})]})]}):null}var $,ee=a(74),te=a.n(ee),ae=a(103),ne=a(104),ce=a.n(ne),re="https://squad-u-p.herokuapp.com/";function se(e){var t=Object(c.useState)(e.match.params.id),a=Object(E.a)(t,2),r=a[0],s=(a[1],Object(c.useState)("")),i=Object(E.a)(s,2),o=i[0],l=i[1],d=Object(c.useState)([]),u=Object(E.a)(d,2),j=u[0],b=u[1],O=Object(c.useState)(null),m=Object(E.a)(O,2),x=m[0],f=m[1],g=Object(c.useState)(!1),v=Object(E.a)(g,2),w=v[0],C=v[1];Object(c.useEffect)((function(){f(e.user),x||p.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(e){f(e.data)})),console.log(e.user),p.a.get("".concat(h,"/chat/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){e.data&&b(e.data)})),$=ce()(re),S()}),[re]),Object(c.useEffect)((function(){$.on("receive_message",(function(e){b([].concat(Object(Q.a)(j),[e]))}))}));var S=function(){$.emit("join_room",r),C(!0)},_=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={room:r,senderId:x._id,senderName:x.username,content:o},e.next=4,$.emit("send_message",a);case 4:b([].concat(Object(Q.a)(j),[a])),l(""),t.target.message.value="",console.log(j);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){$.emit("disconnect"),$.disconnect(),console.log("disconnected")}}),[]),x&&r&&w?Object(n.jsxs)("div",{className:"chatContainer",children:[Object(n.jsx)("div",{className:"messages",children:j.map((function(e,t){return Object(n.jsx)("div",{className:"messageContainer",id:e.senderId==x._id?"You":"Other",children:Object(n.jsxs)("div",{className:"messageIndividual",children:[e.senderName,": ",e.content]})})}))}),Object(n.jsx)("div",{className:"messageInputs",children:Object(n.jsxs)(y.a,{onSubmit:_,children:[Object(n.jsx)("input",{type:"text",placeholder:"Message...",name:"message",onChange:function(e){l(e.target.value)}}),Object(n.jsx)("button",{type:"submit",children:"Send"})]})})]}):Object(n.jsxs)("div",{children:["this is the chat ",e.match.params.id]})}function ie(e){var t=Object(c.useState)(e.user),a=Object(E.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(null),o=Object(E.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){r?p.a.get("".concat(h,"/profile/").concat(r._id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)})):p.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(e){s(e.data),p.a.get("".concat(h,"/profile/").concat(e.data._id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)}))}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Chats"}),l?Object(n.jsx)("div",{children:l.map((function(e){return Object(n.jsx)(w.b,{to:"/chat/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsxs)("b",{children:[Object(n.jsx)(w.b,{to:"profile/".concat(e.creator._id),children:e.creator.username})," "]})]})]})},e._id)}))}):Object(n.jsx)("p",{children:"No chats yet, join a squad to start chatting!"})]})}var oe=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:null,errorMessage:null},e.handleSignUp=function(t){t.preventDefault();var a=t.target,n=a.username,c=a.email,r=a.password,s=a.confirmPassword;p.a.post("".concat(h,"/signup"),{username:n.value,email:c.value,password:r.value,confirmPassword:s.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/profile/edit")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleSignIn=function(t){t.preventDefault();var a=t.target,n=a.email,c=a.password;p.a.post("".concat(h,"/signin"),{email:n.value,password:c.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleLogout=function(){p.a.post("".concat(h,"/logout"),{},{withCredentials:!0}).then((function(){e.setState({user:null},(function(){e.props.history.push("/")}))}))},e.handleUnmount=function(){e.setState({errorMessage:null})},e.handleProfileEdit=function(t){t.preventDefault();var a=t.target,n=a.image,c=a.bio,r=a.platforms,s=a.games;console.log("length:",r.length);var i=[];if(r.length)for(var o=0;o<r.length;o++)i.push(r[o].value);else i.push(r.value);console.log("platforms: ",i);var l=[];if(s.length)for(var d=0;d<s.length;d++)l.push(s[d].value);else l.push(s.value);if(console.log("games: ",l),n.value){var u=n.files[0],j=new FormData;j.append("imageUrl",u),p.a.post("".concat(h,"/upload"),j,{withCredentials:!0}).then((function(t){var a={username:e.state.user.username,email:e.state.user.email,image:t.data.image,bio:c.value,platforms:i,games:l,_id:e.state.user._id};p.a.patch("".concat(h,"/profile/edit"),a,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.data},(function(){e.props.history.push("/profile/".concat(e.state.user._id))}))})).catch((function(e){console.log("prof edit",e)}))})).catch((function(e){console.log("img upload",e)}))}else{var b={username:e.state.user.username,email:e.state.user.email,image:e.state.user.image||"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",bio:c.value,platforms:i,games:l,_id:e.state.user._id};p.a.patch("".concat(h,"/profile/edit"),b,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.data},(function(){e.props.history.push("/profile/".concat(e.state.user._id))}))})).catch((function(e){console.log(e)}))}},e.handleChangePassword=function(t){t.preventDefault();var a=t.target,n=a.password,c=a.newPassword,r=a.confirmPassword;p.a.patch("".concat(h,"/profile/password"),{password:n,newPassword:c,confirmPassword:r},{withCredentials:!0}).then((function(t){console.log("pw change successful"),e.setState({user:t.data},(function(){e.props.history.push("/settings")}))}))},e.handleCreateSquad=function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,r=a.game,s=a.maxSize,i=JSON.parse(r.value),o={title:n.value,description:c.value,game:i.name,maxSize:s.value,creator:e.state.user._id,members:[e.state.user._id]};console.log("create squad called",o),p.a.post("".concat(h,"/squads/create"),o,{withCredentials:!0}).then((function(t){console.log(t.data),e.props.history.push("/squads/".concat(t.data._id))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.user||p.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorMessage,c=t.user;return Object(n.jsxs)("div",{className:"App",children:[c?Object(n.jsx)(C,{onLogout:this.handleLogout,user:c}):Object(n.jsx)(S,{}),c?Object(n.jsxs)("p",{children:["user: ",c.username]}):null,Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/",component:m}),Object(n.jsx)(b.a,{path:"/signup",render:function(t){return Object(n.jsx)(L,Object(o.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignUp:e.handleSignUp},t))}}),Object(n.jsx)(b.a,{path:"/signin",render:function(t){return Object(n.jsx)(q,Object(o.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignIn:e.handleSignIn},t))}}),Object(n.jsx)(b.a,{path:"/settings",component:D}),Object(n.jsx)(b.a,{path:"/profile/edit",render:function(t){return Object(n.jsx)(M,Object(o.a)({onEditProfile:e.handleProfileEdit,user:c},t))}}),Object(n.jsx)(b.a,{path:"/profile/security",render:function(t){return Object(n.jsx)(U,Object(o.a)({user:c,onChangePassword:e.handleChangePassword},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/profile/:id",component:A}),Object(n.jsx)(b.a,{exact:!0,path:"/squads",component:J}),Object(n.jsx)(b.a,{path:"/squads/create",render:function(t){return Object(n.jsx)(T,Object(o.a)({user:c,onCreateSquad:e.handleCreateSquad},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/squads/:id",render:function(e){return Object(n.jsx)(R,Object(o.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/squads/:id/edit",component:W}),Object(n.jsx)(b.a,{exact:!0,path:"/forums",component:H}),Object(n.jsx)(b.a,{path:"/forums/new",render:function(e){return Object(n.jsx)(K,Object(o.a)({user:c},e))}}),Object(n.jsx)(b.a,{exact:!0,path:"/forums/:id",render:function(e){return Object(n.jsx)(X,Object(o.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/forums/:id/edit",component:Z}),Object(n.jsx)(b.a,{path:"/chat/:id",render:function(e){return Object(n.jsx)(se,Object(o.a)({user:c},e))}}),Object(n.jsx)(b.a,{exact:!0,path:"/chat",render:function(e){return Object(n.jsx)(ie,Object(o.a)({user:c},e))}})]})]})}}]),a}(c.Component),le=Object(b.f)(oe),de=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,186)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};a(171),a(172);a(48).config(),i.a.render(Object(n.jsx)(w.a,{children:Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(le,{})})}),document.getElementById("root")),de()}},[[173,1,2]]]);
//# sourceMappingURL=main.d11ee174.chunk.js.map