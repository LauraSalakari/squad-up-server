(this["webpackJsonpsquad-up-client"]=this["webpackJsonpsquad-up-client"]||[]).push([[0],{197:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(14),o=a.n(s),i=a(12),l=a(181),d=a(182),u=a(192),j=a(190),b=(a(197),a(15)),h="http://localhost:5000/api",p="0d8d5106350244dd979ecfa10b19036d",O=a(9),m=a.n(O);function x(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Welcome to SquadUp!"}),Object(n.jsx)("p",{children:"hello!"})]})}var f=a(531),g=a(532),v=a(529),w=a(528),S=a(11);function C(e){return Object(n.jsx)("div",{children:Object(n.jsxs)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(S.b,{to:"/",children:Object(n.jsx)(f.a.Brand,{children:"SquadUp!"})}),Object(n.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(f.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsxs)(g.a,{className:"mr-auto",children:[Object(n.jsx)(S.b,{to:"/squads",children:"Squads"}),Object(n.jsx)(S.b,{to:"/forums",children:"Forums"})]}),Object(n.jsx)(g.a,{children:Object(n.jsxs)(v.a,{title:"Profile",id:"collasible-nav-dropdown dropdown-button-drop-left",as:w.a,drop:"left",children:[Object(n.jsxs)(v.a.Item,{children:[Object(n.jsx)(S.b,{to:"/profile/".concat(e.user._id),children:" My Profile"})," "]}),Object(n.jsx)(v.a.Item,{children:"Messages"}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(S.b,{to:"/settings",children:"Settings"})}),Object(n.jsx)(v.a.Divider,{}),Object(n.jsx)(v.a.Item,{onClick:e.onLogout,children:"Log Out"})]})})]})]})})}function y(){return Object(n.jsx)("div",{children:Object(n.jsxs)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(S.b,{to:"/",children:Object(n.jsx)(f.a.Brand,{children:"SquadUp!"})}),Object(n.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(f.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsx)(g.a,{className:"mr-auto"}),Object(n.jsxs)(g.a,{children:[Object(n.jsx)(S.b,{to:"/signup",children:"Sign Up"}),Object(n.jsx)(S.b,{to:"/signin",children:"Sign In"})]})]})]})})}var L=a(530),q=a(186);function P(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)(L.a,{onSubmit:e.onSignUp,children:[Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Username"}),Object(n.jsx)(L.a.Control,{type:"text",placeholder:"Enter username",name:"username"})]}),Object(n.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(L.a.Label,{children:"Email Address"}),Object(n.jsx)(L.a.Control,{type:"email",placeholder:"Enter email",name:"email"}),Object(n.jsx)(L.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(L.a.Label,{children:"Password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(L.a.Label,{children:"Confirm Password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Confirm password",name:"confirmPassword"})]}),Object(n.jsx)(q.a,{variant:"primary",type:"submit",children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})}function _(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)(L.a,{onSubmit:e.onSignIn,children:[Object(n.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(L.a.Label,{children:"Email Address"}),Object(n.jsx)(L.a.Control,{type:"email",placeholder:"Enter email",name:"email"})]}),Object(n.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(L.a.Label,{children:"Password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsx)(q.a,{variant:"primary",type:"submit",children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})}var E=a(13),G=a(56),k=a(187),I=a.n(k),M=a(102);function D(e){var t=Object(c.useState)([]),a=Object(E.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)(e.user),l=Object(E.a)(o,2),d=(l[0],l[1],Object(c.useState)([])),u=Object(E.a)(d,2),j=(u[0],u[1],Object(c.useState)([])),b=Object(E.a)(j,2),p=b[0],O=b[1],x=Object(c.useState)([]),f=Object(E.a)(x,2),g=(f[0],f[1],{option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}});Object(c.useEffect)((function(){I.a.init(),m.a.get("".concat(h,"/platforms"),{withCredentials:!0}).then((function(e){var t=e.data.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));s(t)})).catch((function(e){console.log(e,"failed to fetch platforms")}))}),[]);var v=M.debounce((function(e){m.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));O(t)}))}),500);return e.user?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Edit your profile"}),Object(n.jsx)("h5",{children:"Account Details"}),Object(n.jsxs)(L.a,{onSubmit:e.onEditProfile,encType:"multipart/form-data",children:[Object(n.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(L.a.Label,{children:"Username"}),e.user?Object(n.jsx)(L.a.Control,{plaintext:!0,readOnly:!0,defaultValue:e.user.username,style:{color:"#e7e0ec"}}):null]}),Object(n.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(L.a.Label,{children:"Email address"}),e.user?Object(n.jsx)(L.a.Control,{plaintext:!0,readOnly:!0,defaultValue:e.user.email,style:{color:"#e7e0ec"}}):null]}),Object(n.jsx)("h5",{children:"Profile"}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Profile picture"}),Object(n.jsxs)("div",{children:["Your current profile picture: ",Object(n.jsx)("br",{}),e.user.image?Object(n.jsx)("img",{src:e.user.image,alt:"profile preview",style:{width:100,borderRadius:"50%"}}):"No profile picture set"]}),Object(n.jsx)("p",{children:"Upload a new picture:"}),Object(n.jsx)(L.a.File,{id:"custom-file",label:"Choose a file",class:"custom-file-input",custom:!0,name:"image",accept:"image/png, image/jpeg"})]}),Object(n.jsxs)(L.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(n.jsx)(L.a.Label,{children:"About Me"}),Object(n.jsx)(L.a.Control,{as:"textarea",rows:5,name:"bio",defaultValue:e.user.bio})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Choose your platforms"}),Object(n.jsx)(G.a,{closeMenuOnSelect:!1,isMulti:!0,options:r,styles:g,name:"platforms",defaultValue:e.user.platforms?e.user.platforms.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Select your favourite games"}),Object(n.jsx)(G.a,{onInputChange:v,closeMenuOnSelect:!1,isMulti:!0,options:p,styles:g,name:"games",defaultValue:e.user.games?e.user.games.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]}),Object(n.jsx)(q.a,{variant:"primary",type:"submit",children:"Submit"})]})]}):null}a(135).config();var U=a(533);function N(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Settings"}),Object(n.jsxs)(U.a,{variant:"flush",children:[Object(n.jsx)(U.a.Item,{children:Object(n.jsx)(S.b,{to:"/profile/edit",children:"Edit profile"})}),Object(n.jsx)(U.a.Item,{children:Object(n.jsx)(S.b,{to:"/profile/security",children:"Change password"})})]})]})}function A(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Security settings"}),Object(n.jsx)("h5",{children:"Account details:"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Username: "})," ",e.user.username,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Account email: "})," ",e.user.email]}),Object(n.jsx)("h5",{children:"Change password"}),Object(n.jsxs)(L.a,{onSubmit:e.onChangePassword,children:[Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Old password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Enter your password",name:"password"})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"New password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Enter new password",name:"newPassword"})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Confirm new password"}),Object(n.jsx)(L.a.Control,{type:"password",placeholder:"Confirm new password",name:"confirmPassword"})]}),Object(n.jsx)(q.a,{type:"submit",children:"Edit"})]})]})}function z(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){m.a.get("".concat(h,"/profile/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[]),r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.username}),r.image?Object(n.jsx)("img",{src:r.image,style:{width:200,borderRadius:"50%"},alt:"Profile"}):Object(n.jsx)("img",{src:"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",style:{width:200,borderRadius:"50%"},alt:"Default profile"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Bio:"})," ",Object(n.jsx)("br",{}),r.bio]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Platforms:"})," ",Object(n.jsx)("br",{}),r.platforms?r.platforms.map((function(e){var t=JSON.parse(e);return Object(n.jsx)("div",{children:t.name},t.id)})):Object(n.jsx)("p",{children:"No platforms specified"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Favourite Games:"}),r.games?r.games.map((function(e){var t=JSON.parse(e);return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:t.background_image,alt:"Game",style:{height:100}}),t.name]},t.id)})):Object(n.jsx)("p",{children:"No games specified"})]})]}):null}var J=a(42),V=a.n(J);function B(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)([]),o=Object(E.a)(s,2),i=o[0],l=o[1];Object(c.useEffect)((function(){m.a.get("".concat(h,"/squads"),{withCredentials:!0}).then((function(e){r(e.data),l(e.data)}))}),[]);return Object(n.jsxs)("div",{children:[Object(n.jsx)(S.b,{to:"/squads/create",children:Object(n.jsx)(q.a,{variant:"primary",size:"lg",block:!0,children:"Create a Squad!"})}),Object(n.jsx)(L.a.Control,{type:"text",placeholder:"Search squads",name:"squadSearch",onChange:function(e){var t=e.target.value,n=a.filter((function(e){return e.game.toLowerCase().includes(t.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase())}));l(n)}}),Object(n.jsx)("div",{children:a?i.map((function(e){return Object(n.jsx)(S.b,{to:"/squads/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:[Object(n.jsx)("h5",{children:e.title}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Game: "}),e.game]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Creator: "}),Object(n.jsx)(S.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})]}),V()(e.createdAt).format("LLL")]})},e._id)})):null})]})}a(522);var F=a(102);function T(e){var t=Object(c.useState)([]),a=Object(E.a)(t,2),r=a[0],s=a[1],o={option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}},l=F.debounce((function(e){m.a.get("https://api.rawg.io/api/games?key=".concat(p,"&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));s(t)}))}),500,{leading:!0});return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Create a new squad"}),Object(n.jsxs)(L.a,{onSubmit:e.onCreateSquad,children:[Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Title"}),Object(n.jsx)(L.a.Control,{type:"text",placeholder:"Squad title",name:"title"})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Description"}),Object(n.jsx)(L.a.Control,{as:"textarea",rows:5,name:"description"})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Max squad size"}),Object(n.jsx)(L.a.Control,{type:"number",name:"maxSize",defaultValue:2})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Select the game"}),Object(n.jsx)(G.a,{onInputChange:l,options:r,styles:o,name:"game"})]}),Object(n.jsx)(q.a,{variant:"primary",type:"submit",children:"Create!"})]})]})}a(226);function R(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)([]),i=Object(E.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){m.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){var t=e.data.members.map((function(e){return e._id}));d(t),s(e.data)})).catch((function(e){console.log(e)}))}),[]);return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.title}),Object(n.jsxs)("p",{children:["Game: ",Object(n.jsx)("b",{children:r.game})]}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsx)(S.b,{to:"/profile/".concat(r.creator._id),children:r.creator.username})]}),Object(n.jsxs)("p",{children:["Created at: ",V()(r.createdAt).format("LLL")]}),Object(n.jsxs)("p",{style:{border:"1px #e7e0ec solid",padding:15,margin:10,borderRadius:6},children:[Object(n.jsx)("b",{children:"Description:"})," ",Object(n.jsx)("br",{}),r.description]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h5",{children:"Squad members:"}),Object(n.jsx)("dl",{children:r.members.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(S.b,{to:"/profile/".concat(e._id),children:e.username})},e._id)}))})]}),e.user._id==r.creator._id?Object(n.jsxs)("div",{children:[Object(n.jsx)(q.a,{variant:"danger",onClick:function(){m.a.delete("".concat(h,"/squads/").concat(e.match.params.id,"/delete"),{withCredentials:!0}).then((function(t){e.history.push("/squads")}))},children:"Delete Squad"}),Object(n.jsx)(S.b,{to:"/squads/".concat(r._id,"/edit"),children:Object(n.jsx)(q.a,{variant:"secondary",children:"Edit Squad"})})]}):l.includes(e.user._id)?Object(n.jsx)(q.a,{variant:"danger",onClick:function(t){m.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/leave"),{userId:e.user._id},{withCredentials:!0}).then((function(e){console.log(e.data);var t=e.data.members.map((function(e){return e._id}));d(t),s(e.data)}))},children:"Leave Squad"}):Object(n.jsx)(q.a,{variant:"primary",onClick:function(){console.log("clicked",e.user.username),m.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/join"),{userId:e.user._id},{withCredentials:!0}).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))},children:"Join Squad"})]}):null}var Y=a(102);function W(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)([]),l=Object(E.a)(o,2),d=l[0],u=l[1];Object(c.useEffect)((function(){m.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){u([{label:e.data.game,value:e.data.game}]),s(e.data)}))}),[]);var j={option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}},b=Y.debounce((function(e){m.a.get("https://api.rawg.io/api/games?key=".concat(p,"&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));u(t)}))}),500,{leading:!0});return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Edit Your Squad"}),Object(n.jsxs)(L.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,s=a.maxSize,o=a.game,i=JSON.parse(o.value).name,l={title:n.value,description:c.value,maxSize:s.value,game:i};m.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/edit"),l,{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/squads/".concat(r._id))}))},children:[Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Title"}),Object(n.jsx)(L.a.Control,{type:"text",defaultValue:r.title,name:"title"})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Description"}),Object(n.jsx)(L.a.Control,{as:"textarea",rows:5,name:"description",defaultValue:r.description})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Max squad size"}),Object(n.jsx)(L.a.Control,{type:"number",name:"maxSize",defaultValue:r.maxSize})]}),Object(n.jsxs)(L.a.Group,{children:[Object(n.jsx)(L.a.Label,{children:"Select the game"}),Object(n.jsx)(G.a,{onInputChange:b,closeMenuOnSelect:!1,defaultValue:d[0],options:d,styles:j,name:"game"})]}),Object(n.jsx)(q.a,{variant:"primary",type:"submit",children:"Edit!"})]})]}):Object(n.jsx)("h3",{children:"Edit Your Squad"})}function H(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)(null),i=Object(E.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){m.a.get("".concat(h,"/forums"),{withCredentials:!0}).then((function(e){s(e.data),d(e.data)})).catch((function(e){console.log(e)}))}),[]);return l?Object(n.jsxs)("div",{children:[Object(n.jsx)(S.b,{to:"/forums/new",children:Object(n.jsx)(q.a,{variant:"primary",size:"lg",block:!0,children:"Create a Post"})}),Object(n.jsx)(L.a.Control,{type:"text",placeholder:"Search posts",name:"threadSearch",onChange:function(e){var t=e.target.value,a=r.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.content.toLowerCase().includes(t.toLowerCase())}));d(a)}}),Object(n.jsx)("div",{children:r?l.map((function(e){return Object(n.jsx)(S.b,{to:"/forums/".concat(e._id),children:Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10,textDecoration:"none",color:"#e7e0ec"},children:[Object(n.jsx)("h4",{children:e.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(S.b,{to:"/profile/".concat(e.author._id),children:e.author.username})," "]}),V()(e.createdAt).format("LLL")]})})})):null})]}):null}function K(e){return Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.content;m.a.post("".concat(h,"/forums/new"),{title:n.value,content:c.value,author:e.user._id},{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/forums")}))},children:[Object(n.jsx)(L.a.Group,{children:Object(n.jsx)(L.a.Control,{size:"lg",type:"text",placeholder:"Post title",name:"title"})}),Object(n.jsx)(L.a.Group,{children:Object(n.jsx)(L.a.Control,{as:"textarea",rows:8,name:"content"})}),Object(n.jsx)(q.a,{type:"submit",children:"Post"})]})})}var Q=a(191);function X(e){var t=Object(c.useState)(null),a=Object(E.a)(t,2),r=a[0],s=a[1],o=Object(c.useState)(null),i=Object(E.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){m.a.get("".concat(h,"/forums/").concat(e.match.params.id),{withCredentials:!0}).then((function(t){s(t.data),m.a.get("".concat(h,"/forums/").concat(e.match.params.id,"/comments"),{withCredentials:!0}).then((function(e){d(e.data)})).catch((function(e){console.log("this is error:",e)}))})).catch((function(e){console.log(e)}))}),[]);return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:r.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(S.b,{to:"/profile/".concat(r.author._id),children:r.author.username})," "]}),Object(n.jsx)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:r.content}),V()(r.createdAt).format("LLL")," ",Object(n.jsx)("br",{}),e.user._id===r.author._id?Object(n.jsx)(q.a,{children:"Edit"}):null,Object(n.jsxs)(L.a,{onSubmit:function(t){t.preventDefault();var a=t.target.content;m.a.post("".concat(h,"/forums/").concat(e.match.params.id,"/comment"),{author:e.user._id,content:a.value},{withCredentials:!0}).then((function(a){console.log(a.data),a.data.author=e.user,d([].concat(Object(Q.a)(l),[a.data])),t.target.content.value=""}))},children:[Object(n.jsx)(L.a.Control,{as:"textarea",rows:3,name:"content"}),Object(n.jsx)(q.a,{type:"submit",variant:"secondary",children:"Comment"})]}),l?Object(n.jsx)("div",{children:l.map((function(e){return Object(n.jsxs)("div",{style:{border:"1px #e7e0ec solid",padding:5,margin:10},children:[Object(n.jsx)(S.b,{to:"/profile/".concat(e.author._id),children:Object(n.jsx)("b",{children:e.author.username})}),Object(n.jsx)("p",{children:e.content}),V()(e.createdAt).format("LLL")]},e._id)}))}):null]}):null}var Z=function(e){Object(u.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:null,errorMessage:null},e.handleSignUp=function(t){t.preventDefault();var a=t.target,n=a.username,c=a.email,r=a.password,s=a.confirmPassword;m.a.post("".concat(h,"/signup"),{username:n.value,email:c.value,password:r.value,confirmPassword:s.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/profile/edit")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleSignIn=function(t){t.preventDefault();var a=t.target,n=a.email,c=a.password;m.a.post("".concat(h,"/signin"),{email:n.value,password:c.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleLogout=function(){m.a.post("".concat(h,"/logout"),{},{withCredentials:!0}).then((function(){e.setState({user:null},(function(){e.props.history.push("/")}))}))},e.handleUnmount=function(){e.setState({errorMessage:null})},e.handleProfileEdit=function(t){t.preventDefault();var a=t.target,n=a.image,c=a.bio,r=a.platforms,s=a.games;console.log("length:",r.length);var o=[];if(r.length)for(var i=0;i<r.length;i++)o.push(r[i].value);else o.push(r.value);console.log("platforms: ",o);var l=[];if(s.length)for(var d=0;d<s.length;d++)l.push(s[d].value);else l.push(s.value);if(console.log("games: ",l),n.value){var u=n.files[0],j=new FormData;j.append("imageUrl",u),m.a.post("".concat(h,"/upload"),j,{withCredentials:!0}).then((function(t){var a={username:e.state.user.username,email:e.state.user.email,image:t.data.image,bio:c.value,platforms:o,games:l,_id:e.state.user._id};m.a.patch("".concat(h,"/profile/edit"),a,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.user},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("prof edit",e)}))})).catch((function(e){console.log("img upload",e)}))}else{var b={username:e.state.user.username,email:e.state.user.email,image:e.state.user.image||"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",bio:c.value,platforms:o,games:l,_id:e.state.user._id};m.a.patch("".concat(h,"/profile/edit"),b,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.data},(function(){e.props.history.push("/")}))})).catch((function(e){console.log(e)}))}},e.handleChangePassword=function(t){t.preventDefault();var a=t.target,n=a.password,c=a.newPassword,r=a.confirmPassword;m.a.patch("".concat(h,"/profile/password"),{password:n,newPassword:c,confirmPassword:r},{withCredentials:!0}).then((function(t){console.log("pw change successful"),e.setState({user:t.user},(function(){e.props.history.push("/settings")}))}))},e.handleCreateSquad=function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,r=a.game,s=a.maxSize,o=JSON.parse(r.value),i={title:n.value,description:c.value,game:o.name,maxSize:s.value,creator:e.state.user._id,members:[e.state.user._id]};console.log("create squad called",i),m.a.post("".concat(h,"/squads/create"),i,{withCredentials:!0}).then((function(t){console.log(t.data),e.props.history.push("/squads/".concat(t.data._id))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.user||m.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorMessage,c=t.user;return Object(n.jsxs)("div",{className:"App",children:[c?Object(n.jsx)(C,{onLogout:this.handleLogout,user:c}):Object(n.jsx)(y,{}),c?Object(n.jsxs)("p",{children:["user: ",c.username]}):null,Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/",component:x}),Object(n.jsx)(b.a,{path:"/signup",render:function(t){return Object(n.jsx)(P,Object(i.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignUp:e.handleSignUp},t))}}),Object(n.jsx)(b.a,{path:"/signin",render:function(t){return Object(n.jsx)(_,Object(i.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignIn:e.handleSignIn},t))}}),Object(n.jsx)(b.a,{path:"/settings",component:N}),Object(n.jsx)(b.a,{path:"/profile/edit",render:function(t){return Object(n.jsx)(D,Object(i.a)({onEditProfile:e.handleProfileEdit,user:c},t))}}),Object(n.jsx)(b.a,{path:"/profile/security",render:function(t){return Object(n.jsx)(A,Object(i.a)({user:c,onChangePassword:e.handleChangePassword},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/profile/:id",component:z}),Object(n.jsx)(b.a,{exact:!0,path:"/squads",component:B}),Object(n.jsx)(b.a,{path:"/squads/create",render:function(t){return Object(n.jsx)(T,Object(i.a)({user:c,onCreateSquad:e.handleCreateSquad},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/squads/:id",render:function(e){return Object(n.jsx)(R,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/squads/:id/edit",component:W}),Object(n.jsx)(b.a,{exact:!0,path:"/forums",component:H}),Object(n.jsx)(b.a,{path:"/forums/new",render:function(e){return Object(n.jsx)(K,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/forums/:id",render:function(e){return Object(n.jsx)(X,Object(i.a)({user:c},e))}})]})]})}}]),a}(c.Component),$=Object(b.f)(Z),ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,534)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};a(519),a(520);a(135).config(),o.a.render(Object(n.jsx)(S.a,{children:Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)($,{})})}),document.getElementById("root")),ee()}},[[521,1,2]]]);
//# sourceMappingURL=main.45625164.chunk.js.map