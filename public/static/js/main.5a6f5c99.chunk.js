(this["webpackJsonpsquad-up-client"]=this["webpackJsonpsquad-up-client"]||[]).push([[0],{115:function(e,t,a){},170:function(e,t){},174:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(1),s=a.n(c),r=a(20),o=a.n(r),i=a(12),l=a(98),d=a(99),j=a(109),u=a(108),b=(a(115),a(14)),h="http://localhost:5000/api",m=a(9),O=a.n(m),p=a(41);function x(){return Object(n.jsxs)("div",{className:"landing-div",children:[Object(n.jsxs)("h1",{children:["Welcome to ",Object(n.jsx)("span",{style:{color:"#9800ff"},children:"SquadUp!"})]}),Object(n.jsx)("p",{children:"Squad up is a your go-to place to find like-minded new friends!"}),Object(n.jsxs)("div",{className:"feature-container-div",children:[Object(n.jsxs)("div",{className:"feature-div",children:[Object(n.jsx)("p",{children:Object(n.jsx)(p.a,{size:80,style:{color:"#9800FF"}})}),"Find and connect with your new gaming squad or create a new squad!"]}),Object(n.jsxs)("div",{className:"feature-div",children:[Object(n.jsx)("p",{children:Object(n.jsx)(p.c,{size:80,style:{color:"#9800FF"}})}),"Be  avoice in the community and join the conversation in the forums!"]})]}),Object(n.jsx)("p",{children:"Squad up is committed to creating a safe and inclusive space."})]})}var f=a(186),g=a(187),v=a(184),y=a(182),w=a(10);function C(e){var t={paddingTop:7,marginLeft:20,textDecoration:"none"};return Object(n.jsx)("div",{children:Object(n.jsxs)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(w.b,{to:"/",children:Object(n.jsx)(f.a.Brand,{children:Object(n.jsx)("img",{src:"https://res.cloudinary.com/meetpup/image/upload/v1605203131/LogoMakr-0n1Mvj_sx78uw.png",style:{height:40,margin:0,padding:0}})})}),Object(n.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(f.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsxs)(g.a,{className:"mr-auto",children:[Object(n.jsx)(w.b,{to:"/squads",style:Object(i.a)(Object(i.a)({},t),{},{color:"#d81284"}),children:"Squads"}),Object(n.jsx)(w.b,{to:"/forums",style:Object(i.a)(Object(i.a)({},t),{},{color:"#84d812"}),children:"Forums"})]}),Object(n.jsx)(g.a,{children:Object(n.jsxs)(v.a,{title:Object(n.jsx)("img",{src:e.user.image||"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",style:{height:40,borderRadius:"50%"}}),id:"collasible-nav-dropdown dropdown-button-drop-left",as:y.a,drop:"left",children:[Object(n.jsxs)(v.a.Item,{children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.user._id),style:{textDecoration:"none",color:"#9800FF"},children:"My Profile"})," "]}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(w.b,{to:"/chat",style:{textDecoration:"none",color:"#9800FF"},children:" Messages"})}),Object(n.jsx)(v.a.Item,{children:Object(n.jsx)(w.b,{to:"/settings",style:{textDecoration:"none",color:"#9800FF"},children:"Settings"})}),Object(n.jsx)(v.a.Divider,{}),Object(n.jsx)(v.a.Item,{onClick:e.onLogout,style:{textDecoration:"none",color:"#9800FF"},children:"Log Out"})]})})]})]})})}function S(){return Object(n.jsx)("div",{children:Object(n.jsxs)(f.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(n.jsx)(w.b,{to:"/",children:Object(n.jsx)(f.a.Brand,{children:Object(n.jsx)("img",{src:"https://res.cloudinary.com/meetpup/image/upload/v1605203131/LogoMakr-0n1Mvj_sx78uw.png",style:{height:40,margin:0,padding:0}})})}),Object(n.jsx)(f.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(f.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsx)(g.a,{className:"mr-auto"}),Object(n.jsxs)(g.a,{children:[Object(n.jsx)(w.b,{to:"/signup",style:{textDecoration:"none",color:"#9800FF",margin:10},children:"Sign Up"}),Object(n.jsx)(w.b,{to:"/signin",style:{textDecoration:"none",color:"#9800FF",margin:10},children:"Sign In"})]})]})]})})}var q=a(185),N=a(103);function _(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{marginBottom:20,color:"#9800FF"},children:"Sign Up"}),Object(n.jsxs)(q.a,{onSubmit:e.onSignUp,children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Username"}),Object(n.jsx)(q.a.Control,{type:"text",placeholder:"Enter username",name:"username"})]}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(q.a.Label,{children:"Email Address"}),Object(n.jsx)(q.a.Control,{type:"email",placeholder:"Enter email",name:"email"}),Object(n.jsx)(q.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(q.a.Label,{children:"Password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(q.a.Label,{children:"Confirm Password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Confirm password",name:"confirmPassword"})]}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#9800FF",border:"1px solid #9800FF",marginTop:15},children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})]})}function L(e){return Object(c.useEffect)((function(){return e.onUnmount}),[]),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{marginBottom:20,color:"#9800FF"},children:"Sign In"}),Object(n.jsxs)(q.a,{onSubmit:e.onSignIn,children:[Object(n.jsxs)(q.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(q.a.Label,{children:"Email Address"}),Object(n.jsx)(q.a.Control,{type:"email",placeholder:"Enter email",name:"email"})]}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(q.a.Label,{children:"Password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Password",name:"password"})]}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#9800FF",border:"1px solid #9800FF",marginTop:15},children:"Signup"}),e.errorMessage?Object(n.jsx)("p",{style:{color:"red"},children:e.errorMessage}):null]})]})}var F=a(11),k=a(35),E=a(104),P=a.n(E),D=a(68);function G(e){var t=Object(c.useState)([]),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(e.user),l=Object(F.a)(o,2),d=(l[0],l[1],Object(c.useState)([])),j=Object(F.a)(d,2),u=j[0],b=j[1],m={option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}};Object(c.useEffect)((function(){P.a.init(),O.a.get("".concat(h,"/platforms"),{withCredentials:!0}).then((function(e){var t=e.data.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));r(t)})).catch((function(e){console.log(e,"failed to fetch platforms")}))}),[]);var p=D.debounce((function(e){O.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));b(t)}))}),500);return e.user?Object(n.jsxs)("div",{className:"account-settings-main",children:[Object(n.jsx)("h3",{children:"Edit your profile"}),Object(n.jsxs)(q.a,{onSubmit:e.onEditProfile,encType:"multipart/form-data",children:[Object(n.jsxs)("div",{className:"acc-containers-macro",children:[Object(n.jsxs)("div",{className:"account-containers",children:[Object(n.jsx)("h5",{children:"Account Details"}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(q.a.Label,{children:"Username"}),e.user?Object(n.jsx)(q.a.Control,{readOnly:!0,defaultValue:e.user.username,style:{color:"#636c73"}}):null]}),Object(n.jsxs)(q.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(q.a.Label,{children:"Email address"}),e.user?Object(n.jsx)(q.a.Control,{readOnly:!0,defaultValue:e.user.email,style:{color:"#636c73"}}):null]}),Object(n.jsx)("h5",{style:{marginTop:30},children:"Profile Picture"}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsxs)("div",{children:["Your current profile picture: ",Object(n.jsx)("br",{}),e.user.image?Object(n.jsx)("img",{src:e.user.image,alt:"profile preview",style:{width:100,borderRadius:"50%"}}):"No profile picture set"]}),Object(n.jsx)("p",{children:"Upload a new picture:"}),Object(n.jsx)(q.a.File,{id:"custom-file",label:"Choose a file",class:"custom-file-input",custom:!0,name:"image",accept:"image/png, image/jpeg",style:{textAlign:"left"}})]})]}),Object(n.jsxs)("div",{className:"account-containers",children:[Object(n.jsx)("h5",{children:"Profile"}),Object(n.jsxs)(q.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(n.jsx)(q.a.Label,{children:"About Me"}),Object(n.jsx)(q.a.Control,{as:"textarea",rows:5,name:"bio",defaultValue:e.user.bio})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Choose your platforms"}),Object(n.jsx)(k.a,{closeMenuOnSelect:!1,isMulti:!0,options:s,styles:m,name:"platforms",defaultValue:e.user.platforms?e.user.platforms.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Select your favourite games"}),Object(n.jsx)(k.a,{onInputChange:p,closeMenuOnSelect:!1,isMulti:!0,options:u,styles:m,name:"games",defaultValue:e.user.games?e.user.games.map((function(e){return{label:JSON.parse(e).name,value:e}})):null})]})]})]}),Object(n.jsx)(N.a,{variant:"primary",type:"submit",children:"Edit Profile"})]})]}):null}a(50).config();var I=a(188);function M(){return Object(n.jsxs)("div",{className:"settings-div",children:[Object(n.jsx)("h3",{children:"Settings"}),Object(n.jsxs)(I.a,{variant:"flush",style:{backgroundColor:"blue"},children:[Object(n.jsx)(w.b,{to:"/profile/edit",style:{textDecoration:"none"},children:Object(n.jsx)(I.a.Item,{action:!0,variant:"dark",children:"Edit profile"})}),Object(n.jsx)(w.b,{to:"/profile/security",style:{textDecoration:"none"},children:Object(n.jsx)(I.a.Item,{action:!0,variant:"dark",children:"Change password"})})]})]})}function A(e){return Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h3",{children:"Security settings"}),Object(n.jsx)("h5",{children:"Account details:"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Username: "})," ",e.user.username,Object(n.jsx)("br",{}),Object(n.jsx)("b",{children:"Account email: "})," ",e.user.email]}),Object(n.jsx)("h5",{children:"Change password"}),Object(n.jsxs)(q.a,{onSubmit:e.onChangePassword,children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Old password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Enter your password",name:"password"})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"New password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Enter new password",name:"newPassword"})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Confirm new password"}),Object(n.jsx)(q.a.Control,{type:"password",placeholder:"Confirm new password",name:"confirmPassword"})]}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#9800FF",border:"1px solid #9800FF",marginTop:15},children:"Edit"})]})]})}function B(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(null),i=Object(F.a)(o,2),l=i[0],d=i[1],j=Object(c.useState)(e.match.params.id),u=Object(F.a)(j,2),b=u[0],m=u[1],x=function(){O.a.get("".concat(h,"/profile/").concat(e.match.params.id),{withCredentials:!0}).then((function(t){r(t.data),O.a.get("".concat(h,"/profile/").concat(e.match.params.id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)}))})).catch((function(e){console.log(e)}))};return Object(c.useEffect)((function(){x()}),[]),Object(c.useEffect)((function(){b!=e.match.params.id&&(x(),m(e.match.params.id))})),s?Object(n.jsxs)("div",{className:"prof-div",children:[s.image?Object(n.jsx)("img",{src:s.image,style:{width:200,borderRadius:"50%"},alt:"Profile"}):Object(n.jsx)("img",{src:"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",style:{width:200,borderRadius:"50%"},alt:"Default profile"}),Object(n.jsx)("h3",{children:s.username}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Bio:"})," ",Object(n.jsx)("br",{}),s.bio]}),Object(n.jsxs)("div",{className:"prof-features-container",children:[Object(n.jsxs)("div",{className:"prof-feature-div",children:[Object(n.jsx)("h4",{children:"Platforms:"}),s.platforms?s.platforms.map((function(e){var t=JSON.parse(e);return Object(n.jsx)("div",{children:t.name},t.id)})):Object(n.jsxs)("p",{children:[Object(n.jsx)(p.d,{})," ",Object(n.jsx)("br",{})," No platforms specified"]})]}),Object(n.jsxs)("div",{className:"prof-feature-div",children:[Object(n.jsx)("h4",{children:"Favourite Games:"}),s.games?s.games.map((function(e){var t=JSON.parse(e);return Object(n.jsxs)("div",{className:"indiv-game-div",children:[Object(n.jsx)("img",{src:t.background_image,alt:"Game",className:"prof-game-img"}),t.name]},t.id)})):Object(n.jsx)("p",{children:"No games specified"})]}),Object(n.jsxs)("div",{className:"prof-feature-div prof-squad-container",children:[Object(n.jsxs)("h4",{children:[s.username,"'s Squads"]}),l?l.map((function(e){return e.creator._id===s._id?Object(n.jsxs)("div",{className:"prof-squad-div",children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsx)(p.b,{style:{color:"9800ff"}})," ",Object(n.jsx)("b",{children:Object(n.jsx)(w.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})}),"  "]})]},e._id):Object(n.jsxs)("div",{className:"prof-squad-div",children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsxs)("b",{children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})," "]})]})]},e._id)})):null]})]})]}):null}var U=a(28),z=a.n(U);function T(){var e=Object(c.useState)([]),t=Object(F.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)([]),o=Object(F.a)(r,2),i=o[0],l=o[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/squads"),{withCredentials:!0}).then((function(e){s(e.data),l(e.data)}))}),[]);return Object(n.jsxs)("div",{className:"squads-main",children:[Object(n.jsx)("h2",{children:"Find a Squad!"}),Object(n.jsxs)("div",{className:"squads-utilities",children:[Object(n.jsx)(w.b,{to:"/squads/create",children:Object(n.jsx)(N.a,{style:{color:"#d81284",border:"1px solid #d81284",marginBottom:10},variant:"outline",block:!0,children:"Create a Squad!"})}),Object(n.jsx)(q.a.Control,{type:"text",placeholder:"Search squads",name:"squadSearch",onChange:function(e){var t=e.target.value,n=a.filter((function(e){return e.game.toLowerCase().includes(t.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase())}));l(n)}})]}),Object(n.jsx)("div",{className:"squad-div-container",children:a?i.map((function(e){return Object(n.jsx)("div",{className:"indiv-squad-main",children:Object(n.jsxs)(w.b,{to:"/squads/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:[Object(n.jsx)("h5",{children:e.title}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Game: "}),e.game]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Creator: "}),Object(n.jsx)(w.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})]}),z()(e.createdAt).format("LLL")]})},e._id)})):null})]})}a(176);var V=a(68);function J(e){var t=Object(c.useState)([]),a=Object(F.a)(t,2),s=a[0],r=a[1],o={option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}},l=V.debounce((function(e){O.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));r(t)}))}),500,{leading:!0});return Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{color:"#d81284"},children:"Create a new squad"}),Object(n.jsxs)(q.a,{onSubmit:e.onCreateSquad,children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Title"}),Object(n.jsx)(q.a.Control,{type:"text",placeholder:"Squad title",name:"title"})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",rows:5,name:"description"})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Max squad size"}),Object(n.jsx)(q.a.Control,{type:"number",name:"maxSize",defaultValue:2})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Select the game"}),Object(n.jsx)(k.a,{onInputChange:l,options:s,styles:o,name:"game"})]}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#d81284",border:"1px solid #d81284",marginTop:15},children:"Create!"})]})]})}function R(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)([]),i=Object(F.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){var t=e.data.members.map((function(e){return e._id}));d(t),r(e.data)})).catch((function(e){console.log(e)}))}),[]);return s?Object(n.jsxs)("div",{className:"squad-details-div",children:[Object(n.jsx)("h3",{children:s.title}),Object(n.jsxs)("div",{className:"squad-div-container",children:[Object(n.jsxs)("div",{className:"squad-details",children:[Object(n.jsxs)("p",{children:["Game: ",Object(n.jsx)("b",{children:s.game})]}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsx)(w.b,{to:"/profile/".concat(s.creator._id),children:s.creator.username})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Description:"})," ",Object(n.jsx)("br",{}),s.description]}),Object(n.jsxs)("p",{style:{fontSize:"0.8em"},children:["Created at: ",z()(s.createdAt).format("LLL")]})]}),Object(n.jsxs)("div",{className:"squad-details",children:[Object(n.jsx)("h5",{children:"Squad members:"}),Object(n.jsx)("dl",{children:s.members.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(w.b,{to:"/profile/".concat(e._id),children:e.username})},e._id)}))})]})]}),Object(n.jsx)("div",{children:e.user._id==s.creator._id?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/chat/".concat(s._id),children:Object(n.jsx)(N.a,{variant:"outline-primary",children:"Go to chat"})}),Object(n.jsx)(N.a,{variant:"outline-danger",onClick:function(){O.a.delete("".concat(h,"/squads/").concat(e.match.params.id,"/delete"),{withCredentials:!0}).then((function(t){e.history.push("/squads")}))},children:"Delete Squad"}),Object(n.jsx)(w.b,{to:"/squads/".concat(s._id,"/edit"),children:Object(n.jsx)(N.a,{variant:"outline-secondary",children:"Edit Squad"})})]}):l.includes(e.user._id)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(w.b,{to:"/chat/".concat(s._id),children:Object(n.jsx)(N.a,{children:"Go to chat"})}),Object(n.jsx)(N.a,{variant:"outline-danger",onClick:function(t){O.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/leave"),{userId:e.user._id},{withCredentials:!0}).then((function(e){console.log(e.data);var t=e.data.members.map((function(e){return e._id}));d(t),r(e.data)}))},children:"Leave Squad"})]}):l.length<s.maxSize?Object(n.jsx)(N.a,{variant:"outline-primary",onClick:function(){console.log("clicked",e.user.username),O.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/join"),{userId:e.user._id},{withCredentials:!0}).then((function(e){var t=e.data.members.map((function(e){return e._id}));d(t),r(e.data)})).catch((function(e){console.log(e)}))},children:"Join Squad"}):null})]}):null}a(50).config();var Y=a(68);function W(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)([]),l=Object(F.a)(o,2),d=l[0],j=l[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){j([{label:e.data.game,value:e.data.game}]),r(e.data)}))}),[]);var u={option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},control:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})},singleValue:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"black"})}},b=Y.debounce((function(e){O.a.get("https://api.rawg.io/api/games?key=".concat("0d8d5106350244dd979ecfa10b19036d","&search=").concat(e)).then((function(e){var t=e.data.results.map((function(e){return{label:e.name,value:JSON.stringify(e)}}));j(t)}))}),500,{leading:!0});return s?Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{marginBottom:20,color:"#d81284"},children:"Edit Your Squad"}),Object(n.jsxs)(q.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,r=a.maxSize,o=a.game.value.name,i={title:n.value,description:c.value,maxSize:r.value,game:o};O.a.patch("".concat(h,"/squads/").concat(e.match.params.id,"/edit"),i,{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/squads/".concat(s._id))}))},children:[Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Title"}),Object(n.jsx)(q.a.Control,{type:"text",defaultValue:s.title,name:"title"})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Description"}),Object(n.jsx)(q.a.Control,{as:"textarea",rows:5,name:"description",defaultValue:s.description})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Max squad size"}),Object(n.jsx)(q.a.Control,{type:"number",name:"maxSize",defaultValue:s.maxSize})]}),Object(n.jsxs)(q.a.Group,{children:[Object(n.jsx)(q.a.Label,{children:"Select the game"}),Object(n.jsx)(k.a,{onInputChange:b,closeMenuOnSelect:!1,defaultValue:d[0],options:d,styles:u,name:"game"})]}),Object(n.jsx)(N.a,{style:{backgroundColor:"#d81284",border:"1px solid #d81284",marginTop:15},type:"submit",children:"Edit!"})]})]}):Object(n.jsx)("h3",{children:"Edit Your Squad"})}function H(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(null),i=Object(F.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/forums"),{withCredentials:!0}).then((function(e){r(e.data),d(e.data)})).catch((function(e){console.log(e)}))}),[]);return l?Object(n.jsxs)("div",{className:"forums-main",children:[Object(n.jsx)("h2",{children:"Forums"}),Object(n.jsxs)("div",{className:"squads-utilities",children:[Object(n.jsx)(w.b,{to:"/forums/new",children:Object(n.jsx)(N.a,{style:{color:"#84d812",border:"1px solid #84d812",marginBottom:10},variant:"outline",block:!0,children:"Create a Post"})}),Object(n.jsx)(q.a.Control,{type:"text",placeholder:"Search posts",name:"threadSearch",onChange:function(e){var t=e.target.value,a=s.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.content.toLowerCase().includes(t.toLowerCase())}));d(a)}})]}),Object(n.jsx)("div",{className:"squad-div-container",children:s?l.map((function(e){return Object(n.jsx)("div",{className:"indiv-forum-main",children:Object(n.jsxs)(w.b,{to:"/forums/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:[Object(n.jsx)("h4",{children:e.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(w.b,{to:"/profile/".concat(e.author._id),children:e.author.username})," "]}),z()(e.createdAt).format("LLL")]})})})):null})]}):null}function K(e){return Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{marginBottom:20,color:"#84d812"},children:"Create a post"}),Object(n.jsxs)(q.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.content;O.a.post("".concat(h,"/forums/new"),{title:n.value,content:c.value,author:e.user._id},{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/forums")}))},children:[Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{size:"lg",type:"text",placeholder:"Post title",name:"title"})}),Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{as:"textarea",rows:8,name:"content",placeholder:"Post content"})}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#84d812",border:"1px solid #84d812",marginTop:15},children:"Post"})]})]})}a(50).config();var Q=a(48);function X(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(null),i=Object(F.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/forums/").concat(e.match.params.id),{withCredentials:!0}).then((function(t){r(t.data),O.a.get("".concat(h,"/forums/").concat(e.match.params.id,"/comments"),{withCredentials:!0}).then((function(e){d(e.data)})).catch((function(e){console.log("this is error:",e)}))})).catch((function(e){console.log(e)}))}),[]);return s?Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h3",{style:{color:"#84d812"},children:s.title}),Object(n.jsxs)("p",{children:["Author: ",Object(n.jsx)(w.b,{to:"/profile/".concat(s.author._id),children:s.author.username})," "]}),Object(n.jsx)("div",{className:"postContentDiv",children:s.content}),z()(s.createdAt).format("LLL")," ",Object(n.jsx)("br",{}),e.user._id===s.author._id?Object(n.jsxs)("div",{children:[Object(n.jsx)(w.b,{to:"/forums/".concat(e.match.params.id,"/edit"),children:Object(n.jsx)(N.a,{variant:"outline-primary",style:{margin:10},children:"Edit"})}),Object(n.jsx)(N.a,{onClick:function(){O.a.delete("".concat(h,"/forums/").concat(e.match.params.id,"/delete"),{withCredentials:!0}).then((function(){e.history.push("/forums")}))},variant:"outline-danger",style:{margin:10},children:"Delete"})]}):null,Object(n.jsxs)(q.a,{onSubmit:function(t){t.preventDefault();var a=t.target.content;O.a.post("".concat(h,"/forums/").concat(e.match.params.id,"/comment"),{author:e.user._id,content:a.value},{withCredentials:!0}).then((function(a){console.log(a.data),a.data.author=e.user,d([].concat(Object(Q.a)(l),[a.data])),t.target.content.value=""}))},children:[Object(n.jsx)(q.a.Control,{as:"textarea",rows:3,name:"content"}),Object(n.jsx)(N.a,{type:"submit",variant:"secondary",block:!0,style:{marginBottom:20},children:"Comment"})]}),l?Object(n.jsx)("div",{children:l.map((function(e){return Object(n.jsxs)("div",{style:{border:"1px #84d812 solid",padding:5,margin:10},children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.author._id),children:Object(n.jsx)("b",{children:e.author.username})}),Object(n.jsx)("p",{children:e.content}),z()(e.createdAt).format("LLL")]},e._id)}))}):null]}):null}function Z(e){var t=Object(c.useState)(null),a=Object(F.a)(t,2),s=a[0],r=a[1];Object(c.useEffect)((function(){O.a.get("".concat(h,"/forums/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}),[]);return s?Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)("h2",{style:{marginBottom:20,color:"#84d812"},children:"Edit your post"}),Object(n.jsxs)(q.a,{onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title,c=a.content;O.a.patch("".concat(h,"/forums/").concat(e.match.params.id,"/edit"),{title:n.value,content:c.value},{withCredentials:!0}).then((function(t){console.log(t.data),e.history.push("/forums/".concat(e.match.params.id))}))},children:[Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{size:"lg",type:"text",placeholder:"Post title",name:"title",defaultValue:s.title})}),Object(n.jsx)(q.a.Group,{children:Object(n.jsx)(q.a.Control,{as:"textarea",rows:8,name:"content",defaultValue:s.content})}),Object(n.jsx)(N.a,{type:"submit",style:{backgroundColor:"#84d812",border:"1px solid #84d812",marginTop:15},children:"Post"})]})]}):null}var $,ee=a(76),te=a.n(ee),ae=a(105),ne=a(106),ce=a.n(ne),se=a(183),re=a(107),oe="http://localhost:5000";function ie(e){var t=Object(c.useState)(e.match.params.id),a=Object(F.a)(t,2),s=a[0],r=(a[1],Object(c.useState)("")),o=Object(F.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)([]),j=Object(F.a)(d,2),u=j[0],b=j[1],m=Object(c.useState)(null),p=Object(F.a)(m,2),x=p[0],f=p[1],g=Object(c.useState)(!1),v=Object(F.a)(g,2),y=v[0],w=v[1],C=Object(c.useState)(null),S=Object(F.a)(C,2),N=S[0],_=S[1];Object(c.useEffect)((function(){f(e.user),x||O.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(e){f(e.data)})),console.log(e.user),O.a.get("".concat(h,"/chat/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){e.data&&b(e.data)})),O.a.get("".concat(h,"/squads/").concat(e.match.params.id),{withCredentials:!0}).then((function(e){_(e.data)})).catch((function(e){console.log(e)})),$=ce()(oe),L()}),[oe]),Object(c.useEffect)((function(){$.on("receive_message",(function(e){b([].concat(Object(Q.a)(u),[e]))}))}));var L=function(){$.emit("join_room",s),w(!0)},k=function(){var e=Object(ae.a)(te.a.mark((function e(t){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={room:s,senderId:x._id,senderName:x.username,content:i},e.next=4,$.emit("send_message",a);case 4:b([].concat(Object(Q.a)(u),[a])),l(""),t.target.message.value="",console.log(u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){$.emit("disconnect"),$.disconnect(),console.log("disconnected")}}),[]),x&&s&&y&&N?Object(n.jsxs)("div",{className:"chat-main-div",children:[Object(n.jsx)("h2",{style:{textAlign:"center"},children:N.title}),Object(n.jsxs)("div",{className:"chatContainer",children:[Object(n.jsx)("div",{className:"scroll-container",children:Object(n.jsx)("div",{className:"messages",children:u.map((function(e,t){return Object(n.jsx)("div",{className:"messageContainer",id:e.senderId==x._id?"You":"Other",children:Object(n.jsxs)("div",{className:"messageIndividual",children:[Object(n.jsxs)("span",{style:{color:"#283239"},children:[e.senderName,":"]})," ",e.content]})})}))})}),Object(n.jsx)("div",{className:"messageInputs",children:Object(n.jsxs)(q.a,{onSubmit:k,children:[Object(n.jsx)("input",{type:"text",placeholder:"Message...",name:"message",onChange:function(e){l(e.target.value)}}),Object(n.jsx)("button",{type:"submit",children:Object(n.jsx)(re.a,{})})]})})]})]}):Object(n.jsx)(se.a,{animation:"grow",variant:"secondary"})}function le(e){var t=Object(c.useState)(e.user),a=Object(F.a)(t,2),s=a[0],r=a[1],o=Object(c.useState)(null),i=Object(F.a)(o,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){s?O.a.get("".concat(h,"/profile/").concat(s._id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)})):O.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(e){r(e.data),O.a.get("".concat(h,"/profile/").concat(e.data._id,"/squads"),{withCredentials:!0}).then((function(e){d(e.data)}))}))}),[]),Object(n.jsxs)("div",{className:"chatlog-div",children:[Object(n.jsx)("h2",{style:{color:"#d81284"},children:"Chats"}),l?Object(n.jsx)("div",{children:l.map((function(e){return Object(n.jsx)("div",{className:"chat-detail-div",children:Object(n.jsxs)(w.b,{to:"/chat/".concat(e._id),style:{textDecoration:"none",color:"#e7e0ec"},children:[Object(n.jsx)("h6",{children:e.title}),Object(n.jsxs)("p",{children:["Creator: ",Object(n.jsxs)("b",{children:[Object(n.jsx)(w.b,{to:"/profile/".concat(e.creator._id),children:e.creator.username})," "]})]})]})},e._id)}))}):Object(n.jsx)("div",{children:"No chats yet, join a squad to start chatting!"})]})}var de=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={user:null,errorMessage:null},e.handleSignUp=function(t){t.preventDefault();var a=t.target,n=a.username,c=a.email,s=a.password,r=a.confirmPassword;O.a.post("".concat(h,"/signup"),{username:n.value,email:c.value,password:s.value,confirmPassword:r.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/profile/edit")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleSignIn=function(t){t.preventDefault();var a=t.target,n=a.email,c=a.password;O.a.post("".concat(h,"/signin"),{email:n.value,password:c.value},{withCredentials:!0}).then((function(t){e.setState({user:t.data},(function(){e.props.history.push("/")}))})).catch((function(t){e.setState({errorMessage:t.response.data.errorMessage})}))},e.handleLogout=function(){O.a.post("".concat(h,"/logout"),{},{withCredentials:!0}).then((function(){e.setState({user:null},(function(){e.props.history.push("/")}))}))},e.handleUnmount=function(){e.setState({errorMessage:null})},e.handleProfileEdit=function(t){t.preventDefault();var a=t.target,n=a.image,c=a.bio,s=a.platforms,r=a.games;console.log("length:",s.length);var o=[];if(s.length)for(var i=0;i<s.length;i++)o.push(s[i].value);else o.push(s.value);console.log("platforms: ",o);var l=[];if(r.length)for(var d=0;d<r.length;d++)l.push(r[d].value);else l.push(r.value);if(console.log("games: ",l),n.value){var j=n.files[0],u=new FormData;u.append("imageUrl",j),O.a.post("".concat(h,"/upload"),u,{withCredentials:!0}).then((function(t){var a={username:e.state.user.username,email:e.state.user.email,image:t.data.image,bio:c.value,platforms:o,games:l,_id:e.state.user._id};O.a.patch("".concat(h,"/profile/edit"),a,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.data},(function(){e.props.history.push("/profile/".concat(e.state.user._id))}))})).catch((function(e){console.log("prof edit",e)}))})).catch((function(e){console.log("img upload",e)}))}else{var b={username:e.state.user.username,email:e.state.user.email,image:e.state.user.image||"https://res.cloudinary.com/meetpup/image/upload/v1604869142/prof-default-icon_ody7zu.png",bio:c.value,platforms:o,games:l,_id:e.state.user._id};O.a.patch("".concat(h,"/profile/edit"),b,{withCredentials:!0}).then((function(t){console.log(t.data),e.setState({user:t.data},(function(){e.props.history.push("/profile/".concat(e.state.user._id))}))})).catch((function(e){console.log(e)}))}},e.handleChangePassword=function(t){t.preventDefault();var a=t.target,n=a.password,c=a.newPassword,s=a.confirmPassword;O.a.patch("".concat(h,"/profile/password"),{password:n,newPassword:c,confirmPassword:s},{withCredentials:!0}).then((function(t){console.log("pw change successful"),e.setState({user:t.data},(function(){e.props.history.push("/settings")}))}))},e.handleCreateSquad=function(t){t.preventDefault();var a=t.target,n=a.title,c=a.description,s=a.game,r=a.maxSize,o=JSON.parse(s.value),i={title:n.value,description:c.value,game:o.name,maxSize:r.value,creator:e.state.user._id,members:[e.state.user._id]};console.log("create squad called",i),O.a.post("".concat(h,"/squads/create"),i,{withCredentials:!0}).then((function(t){console.log(t.data),e.props.history.push("/squads/".concat(t.data._id))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.user||O.a.get("".concat(h,"/user"),{withCredentials:!0}).then((function(t){e.setState({user:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.errorMessage,c=t.user;return Object(n.jsxs)("div",{className:"App",children:[c?Object(n.jsx)(C,{onLogout:this.handleLogout,user:c}):Object(n.jsx)(S,{}),Object(n.jsx)("div",{className:"mainBox",children:Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{exact:!0,path:"/",component:x}),Object(n.jsx)(b.a,{path:"/signup",render:function(t){return Object(n.jsx)(_,Object(i.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignUp:e.handleSignUp},t))}}),Object(n.jsx)(b.a,{path:"/signin",render:function(t){return Object(n.jsx)(L,Object(i.a)({onUnmount:e.handleUnmount,errorMessage:a,onSignIn:e.handleSignIn},t))}}),Object(n.jsx)(b.a,{path:"/settings",component:M}),Object(n.jsx)(b.a,{path:"/profile/edit",render:function(t){return Object(n.jsx)(G,Object(i.a)({onEditProfile:e.handleProfileEdit,user:c},t))}}),Object(n.jsx)(b.a,{path:"/profile/security",render:function(t){return Object(n.jsx)(A,Object(i.a)({user:c,onChangePassword:e.handleChangePassword},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/profile/:id",component:B}),Object(n.jsx)(b.a,{exact:!0,path:"/squads",component:T}),Object(n.jsx)(b.a,{path:"/squads/create",render:function(t){return Object(n.jsx)(J,Object(i.a)({user:c,onCreateSquad:e.handleCreateSquad},t))}}),Object(n.jsx)(b.a,{exact:!0,path:"/squads/:id",render:function(e){return Object(n.jsx)(R,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/squads/:id/edit",component:W}),Object(n.jsx)(b.a,{exact:!0,path:"/forums",component:H}),Object(n.jsx)(b.a,{path:"/forums/new",render:function(e){return Object(n.jsx)(K,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{exact:!0,path:"/forums/:id",render:function(e){return Object(n.jsx)(X,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{path:"/forums/:id/edit",component:Z}),Object(n.jsx)(b.a,{path:"/chat/:id",render:function(e){return Object(n.jsx)(ie,Object(i.a)({user:c},e))}}),Object(n.jsx)(b.a,{exact:!0,path:"/chat",render:function(e){return Object(n.jsx)(le,Object(i.a)({user:c},e))}})]})})]})}}]),a}(c.Component),je=Object(b.f)(de),ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,189)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};a(173),a(174);a(50).config(),o.a.render(Object(n.jsx)(w.a,{children:Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(je,{})})}),document.getElementById("root")),ue()}},[[175,1,2]]]);
//# sourceMappingURL=main.5a6f5c99.chunk.js.map